(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b9d35"],{3530:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?a("Loader",{attrs:{text:"Загружаем данные..."}}):a("v-row",[a("v-col",{attrs:{cols:"8"}},[a("v-card",[a("v-card-title",[t._v("Список пользователей")]),a("v-data-table",{attrs:{headers:t.usersTableHeaders,items:t.usersTableItems,loading:t.loadingTable,"loading-text":"Получаем список пользователей...","item-key":t.usersTableItems.email,"hide-default-footer":""},scopedSlots:t._u([{key:"header.avatar",fn:function(e){var s=e.on;return[a("v-icon",t._g({},s),[t._v("mdi-account")])]}},{key:"item.avatar",fn:function(e){var s=e.item;return[s.avatar?a("v-avatar",{attrs:{size:"40",color:"primary"}},[a("v-img",{attrs:{src:s.avatar}})],1):a("v-avatar",{staticClass:"white--text",attrs:{size:"40",color:"primary"}},[t._v(" "+t._s(s.name[0].toUpperCase())+" ")])]}},{key:"item.admin",fn:function(e){var s=e.item;return[s.admin?a("v-chip",{staticClass:"red lighten-4 red--text mr-2 font-weight-bold",attrs:{small:"",label:""}},[t._v("Администратор")]):t._e(),a("v-chip",{staticClass:"green lighten-4 green--text mr-2 font-weight-bold",attrs:{small:"",label:""}},[t._v("Пользователь")]),a("v-menu",{attrs:{transition:"slide-x-transition","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-chip",t._g({staticClass:"font-weight-bold subtitle-1 grey lighten-4",attrs:{small:"",label:""}},s),[a("v-icon",{attrs:{small:""}},[t._v("mdi-pencil")])],1)]}}],null,!0)},[a("v-list",{attrs:{dense:""}},[a("v-list-item",{staticClass:"grey lighten-3",attrs:{disabled:"",link:""},on:{click:function(e){return t.toggleRules(s,"standart")}}},[a("v-chip",{staticClass:"green lighten-2",attrs:{label:"",small:""}}),a("v-list-item",{staticClass:"body-2"},[a("span",{staticClass:"grey--text"},[t._v("Пользователь")])])],1),a("v-list-item",{attrs:{link:""},on:{click:function(e){return t.toggleRules(s,"admin")}}},[a("v-chip",{staticClass:"red",attrs:{label:"",small:""}}),a("v-list-item",{staticClass:"body-2"},[t._v("Администратор")])],1)],1)],1)]}},{key:"item.groups",fn:function(e){var s=e.item;return[s.groups?a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({staticClass:"font-weight-bold",attrs:{disabled:"",outlined:"",small:"",color:"primary"}},r),[t._v(t._s(Object.keys(s.groups).length))])]}}],null,!0)},[a("span",[t._v("Открыть список")])]):a("v-icon",{attrs:{color:"error"}},[t._v("mdi-close")])]}}])})],1)],1),a("v-col",{attrs:{cols:"4"}},[a("v-card")],1)],1)},r=[],n=(a("d81d"),a("b0c0"),a("96cf"),a("1da1")),i=a("555f"),l={data:function(){return{usersTableHeaders:[{text:"",value:"avatar",sortable:!1,width:"50px",align:"center"},{text:"Имя",value:"name"},{text:"Email",value:"email"},{text:"Права",value:"admin"},{text:"Кол-во групп",value:"groups",align:"center"}],usersTableItems:[],loading:!0,loadingTable:!1,userRulesStandart:!0,userRulesAdmin:!1}},created:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("fetchUserList");case 2:a=e.sent,a.map((function(e){t.usersTableItems.push({avatar:e.info.avatar,name:e.info.name,email:e.info.email,admin:e.info.isAdmin,id:e.id,groups:e.groups})})),t.loading=!1;case 5:case"end":return e.stop()}}),e)})))()},methods:{toggleRules:function(t,e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a.loadingTable=!0,s.next=3,a.$store.dispatch("getUserRules",{item:t,rules:e});case 3:return a.usersTableItems=[],s.next=6,a.$store.dispatch("fetchUserList");case 6:r=s.sent,r.map((function(t){a.usersTableItems.push({avatar:t.info.avatar,name:t.info.name,email:t.info.email,admin:t.info.isAdmin,id:t.id})})),a.loadingTable=!1;case 9:case"end":return s.stop()}}),s)})))()}},computed:{},components:{Loader:i["a"]}},o=l,c=a("2877"),u=a("6544"),d=a.n(u),m=a("8212"),v=a("8336"),g=a("b0af"),f=a("99d9"),p=a("cc20"),b=a("62ad"),h=a("8fea"),_=a("132d"),w=a("adda"),x=a("8860"),k=a("da13"),y=a("e449"),C=a("0fd9"),T=a("3a2f"),V=Object(c["a"])(o,s,r,!1,null,null,null);e["default"]=V.exports;d()(V,{VAvatar:m["a"],VBtn:v["a"],VCard:g["a"],VCardTitle:f["c"],VChip:p["a"],VCol:b["a"],VDataTable:h["a"],VIcon:_["a"],VImg:w["a"],VList:x["a"],VListItem:k["a"],VMenu:y["a"],VRow:C["a"],VTooltip:T["a"]})}}]);
//# sourceMappingURL=chunk-2d0b9d35.7285d90b.js.map